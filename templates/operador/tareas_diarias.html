<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mis Tareas Diarias - Operador</title>
    <link rel="stylesheet" href="../../static/css/main.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <nav class="navbar">
        <div class="nav-brand">
            <i class="fas fa-tasks"></i>
            <span>Tareas Diarias</span>
        </div>
        <div class="nav-user">
            <span id="userDisplay">Operador</span>
            <span class="role-badge badge-operador">OPERADOR</span>
            <button onclick="window.location.href='dashboard_operador.html'" class="btn-secondary">
                <i class="fas fa-arrow-left"></i> Volver
            </button>
            <button id="logoutBtn" class="btn-logout">
                <i class="fas fa-sign-out-alt"></i>
            </button>
        </div>
    </nav>
    
    <div class="sidebar">
        <div class="menu-section">
            <h3><i class="fas fa-tasks"></i> Operaciones</h3>
            <a href="dashboard_operador.html" class="menu-item">
                <i class="fas fa-home"></i> Mi Dashboard
            </a>
            <a href="tareas_diarias.html" class="menu-item active">
                <i class="fas fa-calendar-day"></i> Tareas Diarias
            </a>
            <a href="nueva_publicacion.html" class="menu-item">
                <i class="fas fa-plus-circle"></i> Nueva Publicación
            </a>
            <a href="mis_publicaciones.html" class="menu-item">
                <i class="fas fa-history"></i> Mi Historial
            </a>
        </div>
    </div>
    
    <main class="main-content">
        <div class="page-header">
            <h1><i class="fas fa-calendar-day"></i> Mis Tareas Diarias</h1>
            <p>Revisa y gestiona tus tareas asignadas para hoy</p>
            <button onclick="recargarTareas()" class="btn-secondary">
                <i class="fas fa-sync-alt"></i> Actualizar
            </button>
        </div>
        
        <!-- Resumen del día -->
        <div class="summary-card">
            <div class="summary-header">
                <h2><i class="fas fa-sun"></i> Resumen del Día</h2>
                <span class="badge badge-info" id="fechaResumen"></span>
            </div>
            
            <div class="summary-stats">
                <div class="stat-item">
                    <i class="fas fa-bullseye"></i>
                    <h3>Asignaciones Activas</h3>
                    <p id="asignacionesActivas">0</p>
                </div>
                <div class="stat-item">
                    <i class="fas fa-check-circle"></i>
                    <h3>Completadas Hoy</h3>
                    <p id="completadasHoy">0</p>
                </div>
                <div class="stat-item">
                    <i class="fas fa-clock"></i>
                    <h3>Pendientes</h3>
                    <p id="pendientesHoy">0</p>
                </div>
                <div class="stat-item">
                    <i class="fas fa-percentage"></i>
                    <h3>Progreso Total</h3>
                    <p id="progresoTotal">0%</p>
                </div>
            </div>
        </div>
        
        <!-- Asignación actual -->
        <div class="assignment-card" id="asignacionCard" style="display: none;">
            <div class="assignment-header">
                <h3><i class="fas fa-clipboard-list"></i> Asignación Activa</h3>
                <span class="badge badge-success" id="diasRestantes"></span>
            </div>
            
            <div class="assignment-details">
                <div class="detail-item">
                    <label><i class="fas fa-tag"></i> Categoría:</label>
                    <span id="categoriaAsignada">Cargando...</span>
                </div>
                <div class="detail-item">
                    <label><i class="fas fa-calendar"></i> Período:</label>
                    <span id="periodoAsignacion">Cargando...</span>
                </div>
                <div class="detail-item">
                    <label><i class="fas fa-user-tie"></i> Asignado por:</label>
                    <span id="asignadoPor">Cargando...</span>
                </div>
            </div>
        </div>
        
        <!-- Lista de tareas -->
        <div class="tasks-container">
            <h2><i class="fas fa-list-check"></i> Mis Tareas</h2>
            
            <div class="tasks-grid" id="tasksContainer">
                <!-- Se llena con JavaScript -->
                <div class="loading-state">
                    <i class="fas fa-spinner fa-spin"></i>
                    <p>Cargando tareas...</p>
                </div>
            </div>
        </div>
        
        <!-- Cuentas asignadas -->
        <div class="accounts-card">
            <h2><i class="fas fa-user-friends"></i> Mis Cuentas Facebook Asignadas</h2>
            <div class="accounts-grid" id="accountsContainer">
                <!-- Se llena con JavaScript -->
            </div>
        </div>
    </main>
    
    <!-- Modal para registrar tarea -->
    <div class="modal" id="modalRegistrarTarea">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-check-circle"></i> Registrar Tarea Completada</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <p id="modalTareaTexto">¿Registrar esta tarea como completada?</p>
                <div class="form-group">
                    <label for="modalCantidad">Cantidad completada:</label>
                    <input type="number" id="modalCantidad" min="1" max="10" value="1">
                </div>
                <div class="form-group">
                    <label for="modalNotas">Notas (opcional):</label>
                    <textarea id="modalNotas" rows="3" placeholder="Agregar comentarios..."></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn-secondary" onclick="cerrarModal()">Cancelar</button>
                <button class="btn-primary" onclick="confirmarRegistroTarea()">Registrar</button>
            </div>
        </div>
    </div>
    
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
    <script src="../../static/js/core.js"></script>
    <script src="../../static/js/operador.js"></script>
    <script>
        // Variables específicas para esta página
        let tareaActual = null;
        let asignacionActual = null;
        
        async function cargarTareasDiarias() {
            try {
                const hoy = new Date().toISOString().split('T')[0];
                
                // Obtener asignación activa
                const { data: asignacion, error } = await window.supabaseClient
                    .from('usuarios_asignado')
                    .select('*')
                    .eq('usuario', window.currentUser.usuario)
                    .lte('fecha_desde', hoy)
                    .gte('fecha_hasta', hoy)
                    .single();
                
                if (error && error.code !== 'PGRST116') throw error;
                
                asignacionActual = asignacion || null;
                
                // Actualizar UI de asignación
                if (asignacionActual) {
                    document.getElementById('asignacionCard').style.display = 'block';
                    document.getElementById('categoriaAsignada').textContent = asignacionActual.categoria;
                    document.getElementById('asignadoPor').textContent = asignacionActual.asignado_por || 'Sistema';
                    
                    // Calcular días restantes
                    const fechaHasta = new Date(asignacionActual.fecha_hasta);
                    const hoyDate = new Date(hoy);
                    const diffTime = fechaHasta - hoyDate;
                    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
                    
                    document.getElementById('diasRestantes').textContent = 
                        diffDays > 0 ? `${diffDays} día(s) restante(s)` : 'Último día';
                    
                    document.getElementById('periodoAsignacion').textContent = 
                        `${window.formatearFecha(asignacionActual.fecha_desde)} - ${window.formatearFecha(asignacionActual.fecha_hasta)}`;
                    
                    document.getElementById('asignacionesActivas').textContent = '1';
                }
                
                // Obtener actividad de hoy
                const { data: actividad } = await window.supabaseClient
                    .from('usuarios_actividad')
                    .select('*')
                    .eq('usuario', window.currentUser.usuario)
                    .eq('fecha_logueo', hoy)
                    .single();
                
                // Crear tareas
                const tareas = [
                    {
                        tipo: 'marketplace',
                        nombre: 'Marketplace',
                        objetivo: asignacionActual?.marketplace_daily || 0,
                        completado: actividad?.marketplace_quest || 0,
                        icono: 'fas fa-store',
                        descripcion: 'Publicaciones en Facebook Marketplace'
                    },
                    {
                        tipo: 'historia',
                        nombre: 'Historias',
                        objetivo: asignacionActual?.historia_daily || 0,
                        completado: actividad?.historia_quest || 0,
                        icono: 'fas fa-history',
                        descripcion: 'Historias en Facebook'
                    },
                    {
                        tipo: 'muro',
                        nombre: 'Muro',
                        objetivo: asignacionActual?.muro_daily || 0,
                        completado: actividad?.muro_quest || 0,
                        icono: 'fas fa-newspaper',
                        descripcion: 'Publicaciones en el muro'
                    },
                    {
                        tipo: 'grupo',
                        nombre: 'Grupos',
                        objetivo: asignacionActual?.grupos_daily || 0,
                        completado: actividad?.grupo_quest || 0,
                        icono: 'fas fa-users',
                        descripcion: 'Publicaciones en grupos'
                    }
                ];
                
                // Calcular estadísticas
                const totalObjetivo = tareas.reduce((sum, t) => sum + t.objetivo, 0);
                const totalCompletado = tareas.reduce((sum, t) => sum + t.completado, 0);
                const totalPendiente = totalObjetivo - totalCompletado;
                const porcentajeTotal = totalObjetivo > 0 ? Math.round((totalCompletado / totalObjetivo) * 100) : 0;
                
                // Actualizar estadísticas
                document.getElementById('completadasHoy').textContent = totalCompletado;
                document.getElementById('pendientesHoy').textContent = totalPendiente;
                document.getElementById('progresoTotal').textContent = `${porcentajeTotal}%`;
                
                // Actualizar fecha
                document.getElementById('fechaResumen').textContent = window.formatearFecha(hoy);
                
                // Renderizar tareas
                renderizarTareas(tareas);
                
                // Cargar cuentas asignadas
                await cargarCuentasAsignadas();
                
            } catch (error) {
                console.error('Error cargando tareas diarias:', error);
                window.mostrarMensaje('Error al cargar las tareas', 'error');
            }
        }
        
        function renderizarTareas(tareas) {
            const container = document.getElementById('tasksContainer');
            if (!container) return;
            
            if (tareas.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-calendar-times"></i>
                        <p>No tienes tareas asignadas para hoy</p>
                    </div>
                `;
                return;
            }
            
            let html = '';
            
            tareas.forEach(tarea => {
                const restantes = tarea.objetivo - tarea.completado;
                const completado = restantes <= 0;
                const porcentaje = tarea.objetivo > 0 ? 
                    Math.round((tarea.completado / tarea.objetivo) * 100) : 0;
                
                html += `
                    <div class="task-card-large ${completado ? 'task-completed' : ''}">
                        <div class="task-header-large">
                            <div class="task-icon">
                                <i class="${tarea.icono}"></i>
                            </div>
                            <div class="task-info">
                                <h3>${tarea.nombre}</h3>
                                <p>${tarea.descripcion}</p>
                            </div>
                            <div class="task-progress">
                                <div class="progress-circle" data-percentage="${porcentaje}">
                                    <span>${porcentaje}%</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="task-stats">
                            <div class="stat">
                                <span class="stat-label">Objetivo:</span>
                                <span class="stat-value">${tarea.objetivo}</span>
                            </div>
                            <div class="stat">
                                <span class="stat-label">Completadas:</span>
                                <span class="stat-value ${completado ? 'stat-success' : ''}">${tarea.completado}</span>
                            </div>
                            <div class="stat">
                                <span class="stat-label">Pendientes:</span>
                                <span class="stat-value ${restantes > 0 ? 'stat-warning' : 'stat-success'}">${restantes}</span>
                            </div>
                        </div>
                        
                        ${!completado ? `
                        <div class="task-actions">
                            <button class="btn-primary" onclick="abrirModalRegistro('${tarea.tipo}', '${tarea.nombre}')">
                                <i class="fas fa-check"></i> Registrar Completada
                            </button>
                            <button class="btn-secondary" onclick="window.location.href='nueva_publicacion.html?tipo=${tarea.tipo}'">
                                <i class="fas fa-plus"></i> Crear Publicación
                            </button>
                        </div>
                        ` : `
                        <div class="task-complete-message">
                            <i class="fas fa-check-circle"></i>
                            <span>Tarea completada para hoy</span>
                        </div>
                        `}
                    </div>
                `;
            });
            
            container.innerHTML = html;
            
            // Animar círculos de progreso
            setTimeout(() => {
                document.querySelectorAll('.progress-circle').forEach(circle => {
                    const percentage = circle.getAttribute('data-percentage');
                    circle.style.background = `conic-gradient(
                        #4361ee ${percentage}%, 
                        #e9ecef ${percentage}% 100%
                    )`;
                });
            }, 100);
        }
        
        async function cargarCuentasAsignadas() {
            try {
                const { data, error } = await window.supabaseClient
                    .from('cuentas_facebook')
                    .select('*')
                    .eq('ocupada_por', window.currentUser.usuario)
                    .eq('estado', 'activo');
                
                if (error) throw error;
                
                const container = document.getElementById('accountsContainer');
                if (!container) return;
                
                if (!data || data.length === 0) {
                    container.innerHTML = `
                        <div class="empty-state">
                            <i class="fas fa-user-slash"></i>
                            <p>No tienes cuentas Facebook asignadas</p>
                        </div>
                    `;
                    return;
                }
                
                let html = '';
                
                data.forEach(cuenta => {
                    const calidadClass = cuenta.calidad === 'caliente' ? 'badge-warning' : 'badge-info';
                    
                    html += `
                        <div class="account-card">
                            <div class="account-header">
                                <i class="fas fa-user-circle"></i>
                                <h4>${cuenta.nombre}</h4>
                                <span class="badge ${calidadClass}">${cuenta.calidad}</span>
                            </div>
                            <div class="account-details">
                                <p><i class="fas fa-envelope"></i> ${cuenta.email}</p>
                                <p><i class="fas fa-shield-alt"></i> 2FA: ${cuenta.two_fa || 'No configurado'}</p>
                            </div>
                            <div class="account-actions">
                                <button class="btn-small btn-secondary" 
                                        onclick="window.location.href='nueva_publicacion.html?cuenta=${cuenta.id}'">
                                    <i class="fas fa-plus"></i> Publicar
                                </button>
                            </div>
                        </div>
                    `;
                });
                
                container.innerHTML = html;
                
            } catch (error) {
                console.error('Error cargando cuentas:', error);
            }
        }
        
        function abrirModalRegistro(tipo, nombre) {
            tareaActual = tipo;
            document.getElementById('modalTareaTexto').textContent = 
                `¿Registrar tarea de ${nombre} como completada?`;
            document.getElementById('modalCantidad').value = 1;
            document.getElementById('modalNotas').value = '';
            
            const modal = document.getElementById('modalRegistrarTarea');
            modal.style.display = 'block';
            document.body.style.overflow = 'hidden';
        }
        
        function cerrarModal() {
            const modal = document.getElementById('modalRegistrarTarea');
            modal.style.display = 'none';
            document.body.style.overflow = 'auto';
            tareaActual = null;
        }
        
        async function confirmarRegistroTarea() {
            if (!tareaActual) return;
            
            const cantidad = parseInt(document.getElementById('modalCantidad').value) || 1;
            const notas = document.getElementById('modalNotas').value;
            
            try {
                const hoy = new Date().toISOString().split('T')[0];
                const campo = `${tareaActual}_quest`;
                
                // Obtener actividad actual
                const { data: actividadExistente } = await window.supabaseClient
                    .from('usuarios_actividad')
                    .select('*')
                    .eq('usuario', window.currentUser.usuario)
                    .eq('fecha_logueo', hoy)
                    .single();
                
                let updateData = {};
                
                if (actividadExistente) {
                    // Actualizar existente
                    updateData[campo] = (actividadExistente[campo] || 0) + cantidad;
                    
                    await window.supabaseClient
                        .from('usuarios_actividad')
                        .update(updateData)
                        .eq('id', actividadExistente.id);
                        
                } else {
                    // Crear nueva actividad
                    updateData = {
                        usuario: window.currentUser.usuario,
                        fecha_logueo: hoy,
                        [campo]: cantidad
                    };
                    
                    await window.supabaseClient
                        .from('usuarios_actividad')
                        .insert(updateData);
                }
                
                // Registrar en log si hay notas
                if (notas.trim()) {
                    await window.supabaseClient
                        .from('marketplace_actividad')
                        .insert({
                            usuario: window.currentUser.usuario,
                            titulo: `Registro manual - ${tareaActual}`,
                            descripcion: notas,
                            categoria: asignacionActual?.categoria || 'General',
                            created_at: new Date().toISOString()
                        });
                }
                
                window.mostrarMensaje(`✅ ${cantidad} tarea(s) registrada(s) exitosamente`, 'success');
                cerrarModal();
                await cargarTareasDiarias();
                
            } catch (error) {
                console.error('Error registrando tarea:', error);
                window.mostrarMensaje('❌ Error al registrar la tarea', 'error');
            }
        }
        
        function recargarTareas() {
            cargarTareasDiarias();
            window.mostrarMensaje('Tareas actualizadas', 'info');
        }
        
        // Inicializar cuando el DOM esté listo
        document.addEventListener('DOMContentLoaded', async () => {
            // Verificar autenticación
            if (!window.currentUser || window.currentUser.rol !== 'operador') {
                window.location.href = '../../login.html';
                return;
            }
            
            // Actualizar UI del usuario
            document.getElementById('userDisplay').textContent = window.currentUser.usuario;
            
            // Configurar logout
            document.getElementById('logoutBtn').addEventListener('click', window.cerrarSesion);
            
            // Cargar tareas
            await cargarTareasDiarias();
        });
    </script>
    
    <style>
        /* Estilos específicos para tareas_diarias.html */
        .page-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            flex-wrap: wrap;
            gap: 15px;
        }
        
        .page-header h1 {
            color: var(--text-dark);
            margin: 0;
        }
        
        .summary-card {
            background: var(--card-bg);
            border-radius: var(--radius-lg);
            padding: 25px;
            box-shadow: var(--shadow);
            margin-bottom: 30px;
        }
        
        .summary-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
        }
        
        .summary-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
        }
        
        .stat-item {
            text-align: center;
            padding: 20px;
            background: var(--light-bg);
            border-radius: var(--radius);
        }
        
        .stat-item i {
            font-size: 32px;
            color: var(--primary-color);
            margin-bottom: 15px;
        }
        
        .stat-item h3 {
            font-size: 14px;
            color: var(--text-light);
            margin-bottom: 10px;
            text-transform: uppercase;
        }
        
        .stat-item p {
            font-size: 28px;
            font-weight: bold;
            color: var(--text-dark);
        }
        
        .assignment-card {
            background: linear-gradient(135deg, #4361ee 0%, #3a56d4 100%);
            color: white;
            border-radius: var(--radius-lg);
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: var(--shadow);
        }
        
        .assignment-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .assignment-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
        }
        
        .detail-item {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .detail-item label {
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .detail-item span {
            font-weight: normal;
        }
        
        .tasks-container {
            background: var(--card-bg);
            border-radius: var(--radius-lg);
            padding: 25px;
            box-shadow: var(--shadow);
            margin-bottom: 30px;
        }
        
        .tasks-container h2 {
            margin-bottom: 20px;
            color: var(--text-dark);
        }
        
        .task-card-large {
            background: var(--light-bg);
            border-radius: var(--radius);
            padding: 25px;
            margin-bottom: 20px;
            border-left: 4px solid var(--primary-color);
        }
        
        .task-card-large.task-completed {
            border-left-color: var(--success-color);
            opacity: 0.9;
        }
        
        .task-header-large {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .task-icon {
            width: 60px;
            height: 60px;
            background: var(--primary-color);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 24px;
        }
        
        .task-card-large.task-completed .task-icon {
            background: var(--success-color);
        }
        
        .task-info {
            flex: 1;
        }
        
        .task-info h3 {
            margin: 0 0 5px 0;
            color: var(--text-dark);
        }
        
        .task-info p {
            margin: 0;
            color: var(--text-light);
            font-size: 14px;
        }
        
        .task-progress {
            width: 80px;
            height: 80px;
        }
        
        .progress-circle {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            background: conic-gradient(#e9ecef 0%, #e9ecef 100%);
            transition: background 1s ease;
        }
        
        .progress-circle span {
            font-size: 16px;
            font-weight: bold;
            color: var(--text-dark);
            background: white;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .task-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
            padding: 15px;
            background: rgba(255, 255, 255, 0.5);
            border-radius: var(--radius);
        }
        
        .stat {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .stat-label {
            color: var(--text-light);
            font-size: 14px;
        }
        
        .stat-value {
            font-weight: bold;
            font-size: 18px;
            color: var(--text-dark);
        }
        
        .stat-success {
            color: var(--success-color);
        }
        
        .stat-warning {
            color: var(--warning-color);
        }
        
        .task-actions {
            display: flex;
            gap: 15px;
        }
        
        .task-complete-message {
            display: flex;
            align-items: center;
            gap: 10px;
            color: var(--success-color);
            font-weight: 600;
            padding: 15px;
            background: rgba(76, 201, 240, 0.1);
            border-radius: var(--radius);
        }
        
        .accounts-card {
            background: var(--card-bg);
            border-radius: var(--radius-lg);
            padding: 25px;
            box-shadow: var(--shadow);
        }
        
        .accounts-card h2 {
            margin-bottom: 20px;
            color: var(--text-dark);
        }
        
        .accounts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }
        
        .account-card {
            background: var(--light-bg);
            border-radius: var(--radius);
            padding: 20px;
            border: 1px solid var(--border-color);
        }
        
        .account-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 15px;
        }
        
        .account-header i {
            font-size: 32px;
            color: var(--primary-color);
        }
        
        .account-header h4 {
            margin: 0;
            flex: 1;
            color: var(--text-dark);
        }
        
        .account-details p {
            margin: 10px 0;
            color: var(--text-light);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .account-actions {
            margin-top: 15px;
            text-align: right;
        }
        
        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }
        
        .modal-content {
            background: white;
            border-radius: var(--radius-lg);
            width: 90%;
            max-width: 500px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: var(--shadow-lg);
        }
        
        .modal-header {
            padding: 20px;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .modal-header h3 {
            margin: 0;
            color: var(--text-dark);
        }
        
        .modal-close {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: var(--text-light);
        }
        
        .modal-body {
            padding: 20px;
        }
        
        .modal-footer {
            padding: 20px;
            border-top: 1px solid var(--border-color);
            display: flex;
            justify-content: flex-end;
            gap: 15px;
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .summary-stats {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .task-header-large {
                flex-direction: column;
                text-align: center;
            }
            
            .task-actions {
                flex-direction: column;
            }
            
            .accounts-grid {
                grid-template-columns: 1fr;
            }
            
            .modal-content {
                width: 95%;
                margin: 20px;
            }
        }
        
        @media (max-width: 480px) {
            .summary-stats {
                grid-template-columns: 1fr;
            }
            
            .assignment-details {
                grid-template-columns: 1fr;
            }
            
            .task-stats {
                grid-template-columns: 1fr;
            }
        }
    </style>
</body>
</html>