<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>CategorÃ­as</title>

  <link rel="stylesheet" href="/css/app.css" />
  <script type="module" src="/templates/categoria/categoria.js"></script>
</head>
<body>
  <!-- Sidebar (simple; si tenÃ©s sidebar.html lo podÃ©s inyectar con JS) -->
  <aside class="sidebar">
    <a href="/dashboard.html">ğŸ  Dashboard</a>
    <a class="active" href="/categorias.html">ğŸ“¦ CategorÃ­as</a>
    <a href="/diario/diario.html">ğŸ“ Diario</a>
  </aside>

  <main class="container">
    <h1>ğŸ“¦ CategorÃ­as</h1>

    <section class="card">
      <h2>1) Crear categorÃ­a</h2>

      <div class="grid">
        <div class="field">
          <label for="cat_nombre">Nombre *</label>
          <input id="cat_nombre" type="text" placeholder="Ej: Ropa" />
        </div>

        <div class="field">
          <label for="cat_csv_nombre">CSV nombre (opcional)</label>
          <input id="cat_csv_nombre" type="text" placeholder="Ej: plantilla_ropa.csv" />
          <small>Esto es un alias. El CSV real se sube en el paso 2.</small>
        </div>

        <div class="field full">
          <label for="cat_mensaje">Mensaje *</label>
          <textarea id="cat_mensaje" rows="4" placeholder="Mensaje base..."></textarea>
        </div>

        <div class="field">
          <label for="cat_creado_por">Creado por *</label>
          <input id="cat_creado_por" type="text" placeholder="Ej: operador1" />
          <small>UsÃ¡ el usuario logueado (podÃ©s autocompletar desde localStorage).</small>
        </div>
      </div>

      <div class="actions">
        <button id="btn_crear" class="btn primary">â• Crear</button>
        <span id="status_crear" class="status"></span>
      </div>
    </section>

    <section class="card" id="card_csv" style="display:none;">
      <h2>2) Subir CSV a la categorÃ­a</h2>

      <div class="info">
        <div><b>Categoria:</b> <span id="info_nombre">-</span></div>
        <div><b>ID interno:</b> <span id="info_id">-</span></div>
        <div><b>CSV asociado:</b> <span id="info_csv">(sin CSV)</span></div>
      </div>

      <div class="grid">
        <div class="field full">
          <label for="csv_file">Archivo CSV *</label>
          <input id="csv_file" type="file" accept=".csv,text/csv" />
          <small>Se guardarÃ¡ en Supabase Storage (bucket: categoria_csv).</small>
        </div>
      </div>

      <div class="actions">
        <button id="btn_subir_csv" class="btn">ğŸ“¤ Subir CSV</button>
        <span id="status_csv" class="status"></span>
      </div>
    </section>

    <section class="card">
      <h2>Listado</h2>
      <div id="cats_list" class="muted">Cargando...</div>
    </section>
  </main>
</body>
</html>
