<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Cuentas Facebook</title>

  <!-- CSS global -->
  <link rel="stylesheet" href="../../assets/css/app.css" />
</head>
<body>

  <!-- Sidebar (se carga desde app.js) -->
  <div id="sidebar-container"></div>

  <main class="content">
    <h1>Gestión de Cuentas Facebook</h1>

    <p class="muted">
      Acceso exclusivo para el rol <strong>GERENTE</strong>
    </p>

    <table class="table">
      <thead>
        <tr>
          <th>ID</th>
          <th>Email</th>
          <th>Estado</th>
          <th>Calidad</th>
          <th>Ocupada por</th>
          <th>Acciones</th>
        </tr>
      </thead>
      <tbody id="tabla-cuentas">
        <!-- JS carga los datos -->
      </tbody>
    </table>
  </main>

  <!-- Supabase -->
  <script src="../../assets/js/supabase.js"></script>

  <!-- App: sesión + sidebar + rol -->
  <script type="module">
    import { requireSession, loadSidebar } from "../../assets/js/app.js";

    const session = requireSession();
    if (!session) return;

    if (session.rol !== "gerente") {
      alert("Acceso restringido");
      window.location.href = "../dashboard/dashboard.html";
    }

    loadSidebar({
      activeKey: "cuentas",
      basePath: "../"
    });
  </script>

  <!-- JS de esta página -->
  <script type="module" src="./cuentas_fb.js"></script>
</body>
</html>
