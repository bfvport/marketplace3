<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Cuentas | Marketplace Manager</title>

  <link rel="stylesheet" href="../../assets/css/app.css" />

  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="../../assets/js/supabase.js"></script>

  <style>
    /* ====== Layout general ====== */
    .content {
      padding: 18px !important;
      max-width: 1280px;
      margin: 0 auto;
    }
    .card { overflow: hidden; }
    .muted { opacity: .8; }

    /* ====== Tabla prolija ====== */
    .table-wrap {
      overflow: hidden;
      border-radius: 14px;
    }

    table.table {
      width: 100%;
      border-collapse: collapse;
      table-layout: fixed;
    }

    .table th, .table td {
      padding: 12px 12px;
      vertical-align: middle;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }

    th.col-plat, td.col-plat { width: 110px; }
    th.col-nom,  td.col-nom  { width: 190px; }
    th.col-mail, td.col-mail { width: 220px; }
    th.col-pass, td.col-pass { width: 190px; }
    th.col-2fa,  td.col-2fa  { width: 220px; }
    th.col-ocu,  td.col-ocu  { width: 130px; }
    th.col-est,  td.col-est  { width: 110px; }
    th.col-link, td.col-link { width: 140px; }

    @media (max-width: 980px) {
      .table-wrap { overflow: auto; }
      table.table { min-width: 980px; }
    }

    .mono {
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
    }

    .secret {
      display:flex;
      align-items:center;
      gap:10px;
      min-width:0;
    }
    .secret .val {
      min-width:0;
      overflow:hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }
    .btn-mini {
      padding: 6px 10px;
      border-radius: 10px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.06);
      color: inherit;
      cursor: pointer;
      flex: 0 0 auto;
    }
    .btn-mini:hover { background: rgba(255,255,255,.10); }

    a.linkish { color:#60a5fa; text-decoration:none; }
    a.linkish:hover { text-decoration: underline; }
  </style>
</head>

<body>
  <!-- ✅ CLAVE: esto arregla que quede “arriba” -->
  <div class="layout">
    <div id="sidebar-host"></div>

    <main class="content">
      <section class="card">
        <h2 style="margin:0 0 8px;">Gestión de cuentas sociales</h2>
        <div class="muted">
          Facebook se lee desde <strong>cuentas_facebook</strong>. IG/TikTok desde <strong>cuentas</strong> + <strong>cuentas_asignadas</strong>.
          El operador ve <strong>solo lo asignado</strong>.
        </div>
      </section>

      <section class="card" style="margin-top:14px;">
        <h3 style="margin:0 0 10px;">Cuentas</h3>
        <div class="muted" style="margin-bottom:10px;">
          Contraseña y 2FA se muestran ocultos para que el diseño no se rompa. Podés Ver o Copiar.
        </div>

        <div class="table-wrap">
          <table class="table" id="tablaCuentas">
            <thead>
              <tr class="muted">
                <th class="col-plat">PLATAFORMA</th>
                <th class="col-nom">NOMBRE</th>
                <th class="col-mail">CORREO</th>
                <th class="col-pass">CONTRASEÑA</th>
                <th class="col-2fa">2FA</th>
                <th class="col-ocu">OCUPADA POR</th>
                <th class="col-est">ESTADO</th>
                <th class="col-link">LINK/HANDLE</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
      </section>

      <section class="card" style="margin-top:14px;">
        <h3 style="margin:0 0 10px;">Log</h3>
        <div id="log" class="logbox"></div>
      </section>
    </main>
  </div>

  <script type="module" src="./logica.js"></script>
</body>
</html>
