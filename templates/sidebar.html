<aside class="sidebar">
  <div class="brand">ğŸ“Œ Marketplace Manager</div>

  <div class="sb-user">
    <div><strong id="sb-usuario">-</strong></div>
    <div class="muted">Rol: <span id="sb-rol">-</span></div>
  </div>

  <nav class="nav">
    <!-- COMUNES -->
    <a href="../dashboard/dashboard.html" data-nav="dashboard">ğŸ  Dashboard</a>
    <a href="../diario/diario.html" data-nav="diario">ğŸ“… Diario</a>
    <a href="../publicaciones/publicaciones.html" data-nav="publicaciones">ğŸ“¥ Recursos (Fotos)</a>
    <a href="../metricas/metricas.html" data-nav="metricas">ğŸ“ˆ MÃ©tricas</a>
    <a href="../mensajes/mensajes.html" data-nav="mensajes">ğŸ’¬ Mensajes</a>

    <!-- OPERADOR ONLY -->
    <a href="../calentamiento/calentamiento.html" data-only="operador" data-nav="calentamiento">ğŸ”¥ Calentamiento</a>
    <a href="../soporte/reporte_error.html" data-only="operador" data-nav="reporte_error">ğŸ› ï¸ Reportar error</a>

    <!-- GERENTE ONLY -->
    <a href="../gestionar_publicaciones/gestionar.html" data-only="gerente" data-nav="gestionar_publicaciones">ğŸ“¸ Gestionar Recursos</a>
    <a href="../categoria/categoria.html" data-only="gerente" data-nav="categoria">ğŸ—‚ï¸ CategorÃ­as</a>
    <a href="../cuentas_fb/cuentas_fb.html" data-only="gerente" data-nav="cuentas">ğŸ‘¤ Cuentas Facebook</a>
    <a href="../asignaciones/asignaciones.html" data-only="gerente" data-nav="asignaciones">ğŸ“Œ Asignaciones</a>
    <a href="../actividad/actividad.html" data-only="gerente" data-nav="actividad">ğŸ“Š Actividad</a>
    <a href="../usuarios/usuarios.html" data-only="gerente" data-nav="usuarios">ğŸ‘¤ Usuarios</a>
    <a href="../verificacion/verificacion.html" data-only="gerente" data-nav="verificacion">ğŸ” VerificaciÃ³n</a>

    
    <a href="../soporte/reportes.html" data-only="gerente" data-nav="reportes_errores">ğŸ§¾ Reportes de errores</a>
  </nav>

  <div class="sb-footer">
    <button class="btn2" id="btn-logout">Salir</button>
  </div>
</aside>

<script>
  // Sidebar auto-filtrado por rol SIN tocar app.js
  (function () {
    const SESSION_KEY = "mp_session_v1";

    function getSession() {
      try { return JSON.parse(localStorage.getItem(SESSION_KEY) || "null"); }
      catch { return null; }
    }

    const s = getSession();
    const rol = (s && s.rol) ? s.rol : "operador"; // fallback seguro

    // Pintar usuario/rol (si loadSidebar tambiÃ©n lo hace, esto no molesta)
    const u = document.getElementById("sb-usuario");
    const r = document.getElementById("sb-rol");
    if (u) u.textContent = (s && s.usuario) ? s.usuario : "-";
    if (r) r.textContent = rol;

    // Ocultar links por rol
    document.querySelectorAll("[data-only]").forEach(el => {
      const only = el.getAttribute("data-only");
      if (only && only !== rol) el.style.display = "none";
    });

    // Logout (sin depender de app.js)
    const btn = document.getElementById("btn-logout");
    if (btn) {
      btn.onclick = () => {
        localStorage.removeItem(SESSION_KEY);
        location.href = "../../login.html";
      };
    }
  })();
</script>
