<aside class="sidebar">
  <div class="brand">ğŸ“Œ Marketplace Manager</div>

  <div class="sb-user">
    <div><strong id="sb-usuario">-</strong></div>
    <div class="muted">Rol: <span id="sb-rol">-</span></div>
  </div>

  <nav class="nav">
    <!-- COMÃšN (si querÃ©s que operador tambiÃ©n vea dashboard, dejalo sin data-only) -->
    <a href="../dashboard/dashboard.html" data-nav="dashboard">ğŸ  Dashboard</a>

    <!-- OPERADOR -->
    <a href="../diario/diario.html" data-only="operador" data-nav="diario">ğŸ“… Diario</a>
    <a href="../publicaciones/publicaciones.html" data-only="operador" data-nav="publicaciones">ğŸ“¥ Recursos (Fotos)</a>
    <a href="../calentamiento/calentamiento.html" data-only="operador" data-nav="calentamiento">ğŸ”¥ Calentamiento</a>
    <a href="../mensajes/mensajes.html" data-only="operador" data-nav="mensajes">ğŸ’¬ Mensajes</a>
    <a href="../soporte/reporte_error.html" data-only="operador" data-nav="reporte_error">ğŸ› ï¸ Reportar error</a>

    <!-- GERENTE -->
    <a href="../gestionar_publicaciones/gestionar.html" data-only="gerente" data-nav="gestionar_publicaciones">ğŸ“¸ Gestionar Recursos</a>
    <a href="../categoria/categoria.html" data-only="gerente" data-nav="categoria">ğŸ—‚ï¸ CategorÃ­as</a>
    <a href="../cuentas_fb/cuentas_fb.html" data-only="gerente" data-nav="cuentas">ğŸ‘¤ Cuentas Facebook</a>
    <a href="../asignaciones/asignaciones.html" data-only="gerente" data-nav="asignaciones">ğŸ“Œ Asignaciones</a>
    <a href="../actividad/actividad.html" data-only="gerente" data-nav="actividad">ğŸ“Š Actividad</a>
    <a href="../usuarios/usuarios.html" data-only="gerente" data-nav="usuarios">ğŸ‘¤ Usuarios</a>
    <a href="../verificacion/verificacion.html" data-only="gerente" data-nav="verificacion">ğŸ” VerificaciÃ³n</a>
    <a href="../metricas/metricas.html" data-only="gerente" data-nav="metricas">ğŸ“ˆ MÃ©tricas</a>
    <a href="../calentamiento_gerente/calentamiento_gerente.html" data-only="gerente" data-nav="calentamiento_gerente">ğŸ”¥ Calentamiento (Gerencia)</a>
    <a href="../soporte/reportes.html" data-only="gerente" data-nav="reportes_errores">ğŸ§¾ Reportes de errores</a>
  </nav>

  <div class="sb-footer">
    <button class="btn2" id="btn-logout">Salir</button>
  </div>

  <script>
    (function () {
      // Leer sesiÃ³n
      let s = null;
      try { s = JSON.parse(localStorage.getItem("mp_session_v1") || "null"); } catch {}

      const rol = (s?.rol || "operador").toLowerCase(); // "operador" | "gerente"
      const usuario = s?.usuario || "-";

      // Pintar user/rol
      const u = document.getElementById("sb-usuario");
      const r = document.getElementById("sb-rol");
      if (u) u.textContent = usuario;
      if (r) r.textContent = rol;

      // OCULTAR lo que no corresponde (invisible en sidebar)
      document.querySelectorAll("[data-only]").forEach(el => {
        el.style.display = (el.getAttribute("data-only") === rol) ? "" : "none";
      });

      // Logout
      const btn = document.getElementById("btn-logout");
      if (btn) {
        btn.addEventListener("click", () => {
          localStorage.removeItem("mp_session_v1");
          location.href = "../login/login.html";
        });
      }
    })();
  </script>
</aside>
