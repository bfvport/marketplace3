<!-- templates/sidebar.html -->
<aside class="sidebar">
  <div class="sb-top">
    <div class="sb-brand">Marketplace Manager</div>

    <div class="sb-user">
      <div id="sb-user" class="sb-user-name">â€”</div>
      <div id="sb-role" class="sb-user-role">â€”</div>
    </div>
  </div>

  <nav class="sb-nav">
    <!-- âœ… COMUNES -->
    <a data-key="dashboard" href="../dashboard/dashboard.html">ğŸ  Dashboard</a>

    <!-- âœ… OPERADOR -->
    <a data-key="diario" class="only-operador" href="../diario/diario.html">ğŸ—“ï¸ Diario</a>
    <a data-key="recursos" class="only-operador" href="../publicaciones/publicaciones.html">ğŸ“ Recursos (Fotos)</a>
    <a data-key="calentamiento" class="only-operador" href="../calentamiento/calentamiento.html">ğŸ”¥ Calentamiento</a>
    <a data-key="mensajes" class="only-operador" href="../mensajes/mensajes.html">ğŸ’¬ Mensajes</a>
    <a data-key="reportar_error" class="only-operador" href="../reportar_error/reportar_error.html">ğŸ› ï¸ Reportar error</a>

    <!-- âœ… GERENTE -->
    <a data-key="gestionar_recursos" class="only-gerente" href="../publicaciones_gerente/publicaciones_gerente.html">ğŸ“¦ Gestionar Recursos</a>
    <a data-key="categorias" class="only-gerente" href="../categoria/categoria.html">ğŸ·ï¸ CategorÃ­as</a>
    <a data-key="cuentas_fb" class="only-gerente" href="../cuentas_fb/cuentas_fb.html">ğŸ‘¤ Cuentas Facebook</a>
    <a data-key="asignaciones" class="only-gerente" href="../asignaciones/asignaciones.html">ğŸ§© Asignaciones</a>
    <a data-key="actividad" class="only-gerente" href="../actividad/actividad.html">ğŸ“¡ Actividad</a>
    <a data-key="usuarios" class="only-gerente" href="../usuarios/usuarios.html">ğŸ‘¥ Usuarios</a>
    <a data-key="verificacion" class="only-gerente" href="../verificacion/verificacion.html">âœ… VerificaciÃ³n</a>
    <a data-key="metricas" class="only-gerente" href="../metricas/metricas.html">ğŸ“ˆ MÃ©tricas</a>
    <a data-key="calentamiento_gerente" class="only-gerente" href="../calentamiento_gerente/calentamiento_gerente.html">ğŸ”¥ Calentamiento (Gerente)</a>
    <a data-key="reportes_errores" class="only-gerente" href="../reportes_errores/reportes_errores.html">ğŸ§¾ Reportes de errores</a>
  </nav>

  <div class="sb-bottom">
    <button id="sb-logout" class="btn-danger" style="width:100%;">Salir</button>
  </div>

  <!-- âš ï¸ Esto NO cambia tu estÃ©tica global, solo oculta/mostrar -->
  <style>
    .only-gerente, .only-operador { display: none; }
    .role-gerente .only-gerente { display: flex; }
    .role-operador .only-operador { display: flex; }

    /* Si ya tenÃ©s estilos en app.css, esto casi ni se nota */
    .sidebar { display:flex; flex-direction:column; height:100%; }
    .sb-top { padding:14px; }
    .sb-brand { font-weight:900; color:white; }
    .sb-user-name { color:white; font-weight:800; margin-top:10px; }
    .sb-user-role { color:#94a3b8; font-size:0.85rem; }
    .sb-nav { display:flex; flex-direction:column; gap:6px; padding:0 10px; }
    .sb-nav a { display:flex; align-items:center; gap:10px; padding:10px 12px; border-radius:12px; text-decoration:none; }
    .sb-bottom { padding:14px; margin-top:auto; }
  </style>

  <script>
    (function () {
      let s = null;
      try { s = JSON.parse(localStorage.getItem("mp_session_v1") || "null"); } catch {}

      const usuario = s?.usuario || "â€”";
      const rol = s?.rol || "operador";

      document.getElementById("sb-user").textContent = usuario;
      document.getElementById("sb-role").textContent = "Rol: " + rol;

      const root = document.querySelector(".sidebar");
      root.classList.add(rol === "gerente" ? "role-gerente" : "role-operador");

      document.getElementById("sb-logout").onclick = () => {
        localStorage.removeItem("mp_session_v1");
        location.href = "../login/login.html";
      };
    })();
  </script>
</aside>
