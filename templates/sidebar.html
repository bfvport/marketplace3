<aside class="sidebar">
  <div class="brand">
    <div style="font-weight:900; color:white;">Marketplace Manager</div>
  </div>

  <div class="userbox" style="margin-top:10px;">
    <div id="sb-usuario" style="color:white; font-weight:800;">â€”</div>
    <div id="sb-rol" class="muted" style="margin-top:2px;">â€”</div>
  </div>

  <nav class="nav" style="margin-top:14px;">
    <!-- ==================== COMUNES ==================== -->
    <a data-key="dashboard" href="../dashboard/dashboard.html">ğŸ  Dashboard</a>

    <!-- ==================== OPERADOR ==================== -->
    <a data-key="diario" class="only-operador" href="../diario/diario.html">ğŸ—“ï¸ Diario</a>
    <a data-key="recursos" class="only-operador" href="../publicaciones/publicaciones.html">ğŸ“ Recursos (Fotos)</a>
    <a data-key="calentamiento" class="only-operador" href="../calentamiento/calentamiento.html">ğŸ”¥ Calentamiento</a>
    <a data-key="mensajes" class="only-operador" href="../mensajes/mensajes.html">ğŸ’¬ Mensajes</a>
    <a data-key="reportar_error" class="only-operador" href="../reportar_error/reportar_error.html">ğŸ› ï¸ Reportar error</a>

    <!-- ==================== GERENTE ==================== -->
    <a data-key="gestionar_recursos" class="only-gerente" href="../publicaciones_gerente/publicaciones_gerente.html">ğŸ“¦ Gestionar Recursos</a>
    <a data-key="categorias" class="only-gerente" href="../categoria/categoria.html">ğŸ·ï¸ CategorÃ­as</a>
    <a data-key="cuentas_fb" class="only-gerente" href="../cuentas_fb/cuentas_fb.html">ğŸ‘¤ Cuentas Facebook</a>
    <a data-key="asignaciones" class="only-gerente" href="../asignaciones/asignaciones.html">ğŸ§© Asignaciones</a>
    <a data-key="actividad" class="only-gerente" href="../actividad/actividad.html">ğŸ“¡ Actividad</a>
    <a data-key="usuarios" class="only-gerente" href="../usuarios/usuarios.html">ğŸ‘¥ Usuarios</a>
    <a data-key="verificacion" class="only-gerente" href="../verificacion/verificacion.html">âœ… VerificaciÃ³n</a>
    <a data-key="metricas" class="only-gerente" href="../metricas/metricas.html">ğŸ“ˆ MÃ©tricas</a>
    <a data-key="calentamiento_gerente" class="only-gerente" href="../calentamiento_gerente/calentamiento_gerente.html">ğŸ”¥ Calentamiento (Gerente)</a>
    <a data-key="reportes_errores" class="only-gerente" href="../reportes_errores/reportes_errores.html">ğŸ§¾ Reportes de errores</a>
  </nav>

  <div style="margin-top:auto; padding-top:14px;">
    <button id="sb-salir" class="btn-danger" style="width:100%;">Salir</button>
  </div>

  <style>
    /* Por defecto ocultamos todo lo "rol-especÃ­fico" hasta saber el rol */
    .only-gerente, .only-operador { display:none; }

    /* Cuando se setea el rol */
    .role-gerente .only-gerente { display:flex; }
    .role-operador .only-operador { display:flex; }

    /* Estilo links */
    .nav a{
      display:flex;
      gap:10px;
      align-items:center;
      padding:10px 12px;
      border-radius:12px;
      color:#cbd5e1;
      text-decoration:none;
      margin:4px 0;
      border:1px solid rgba(255,255,255,0.06);
      background: rgba(15, 23, 42, 0.35);
    }
    .nav a.active{
      outline: 2px solid rgba(59,130,246,0.35);
      color:white;
      background: rgba(30, 41, 59, 0.6);
    }
  </style>

  <script>
    (function () {
      // lee sesiÃ³n (misma key del sistema)
      let s = null;
      try { s = JSON.parse(localStorage.getItem("mp_session_v1") || "null"); } catch {}

      const usuario = s?.usuario || "â€”";
      const rol = s?.rol || "â€”";

      document.getElementById("sb-usuario").textContent = usuario;
      document.getElementById("sb-rol").textContent = "Rol: " + rol;

      // marca rol en el sidebar para mostrar/ocultar
      const root = document.querySelector(".sidebar");
      if (rol === "gerente") root.classList.add("role-gerente");
      else root.classList.add("role-operador");

      // salir (limpia sesiÃ³n)
      document.getElementById("sb-salir").onclick = () => {
        localStorage.removeItem("mp_session_v1");
        location.href = "../login/login.html";
      };
    })();
  </script>
</aside>
